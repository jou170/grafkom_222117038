<!DOCTYPE html>
<html>
<body>

<canvas id="myCanvas" width="512" height="512" style="border:1px solid #000000;">
</canvas>

<script>
var c = document.getElementById("myCanvas");
var ctx = c.getContext("2d");

var start = null;
c.addEventListener("mousedown", function (event) {
  if (start == null) {
    start = getCursorPosition(c, event);
  } else {
    var end = getCursorPosition(c, event);
    var x1 = start.x;
    var y1 = start.y;
    var x2 = end.x;
    var y2 = end.y;

    var dx = Math.abs(x2 - x1);
    var dy = Math.abs(y2 - y1);
    var sx = (x1 < x2) ? 1 : -1;
    var sy = (y1 < y2) ? 1 : -1;
    var err = dx - dy;

    while (true) {
      ctx.fillRect(x1, y1, 1, 1);
      if ((x1 == x2) && (y1 == y2)) break;
      var e2 = 2 * err;
      if (e2 > -dy) { err -= dy; x1 += sx; }
      if (e2 < dx) { err += dx; y1 += sy; }
    }

    start = null;
  }
});

function getCursorPosition(canvas, event) {
  const rect = canvas.getBoundingClientRect();
  const x = event.clientX - rect.left;
  const y = event.clientY - rect.top;
  return { x: x, y: y };
}
</script>

</body>
</html>
